import {LazyArray, None, lazy_array, zod} from 'lib'

const test = [
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
  1,
  2,
  3,
  '四',
  5,
  6,
  7,
  8,
  9,
  '10',
  '十一',
  12,
  '十三',
  '十四',
  '十五',
]

Deno.bench({
  name: 'no-lazy',
  fn() {
    const res = test
      .filter(item => !isNaN(Number(item)))
      .map(item => (item as number) * 2)
      .filter(item => item > 10)
  },
})

Deno.bench({
  name: 'lazy',
  fn() {
    let lazy_a = new LazyArray(test)
    const res = lazy_a
      .filter(item => !isNaN(Number(item)))
      .map(item => (item as number) * 2)
      .filter(item => (item as number) > 10)
      .take(30)
      .value()
  },
})
